- name: update cache 
  apt:
    update_cache: yes

- name: Install docker 
  apt:
    name: 
     - docker-ce 
     - docker-ce-cli 
     - containerd.io 
     - docker-buildx-plugin 
     - docker-compose-plugin
    state: latest

- name: Download Docker compose
  get_url:
    url: https://github.com/docker/compose/releases/download/v2.17.2/docker-compose-linux-x86_64
    dest: /usr/local/bin/docker-compose  
    mode: 0755

- name: install python 3
  apt:
    update_cache: yes
    state: latest
    name: python3-pip

- name: Install Docker SDK for Python
  pip:
    name: "docker<5" 
  become: yes

# - name: Setup more docker dependencies
#   pip:
#     name: "websocket-client<1" 
#   become: yes  

# - name: pull an image
#   docker_image:
#     name: nginx:latest
#     source: pull

# - name: Build image and with build args
#   docker_image:
#     name: desafio-06
#     build:
#       path: /var/lib/docker/overlay2
#       args:
#         log_volume: /var/log/myapp
#         listen_port: 8080
#     source: build    
        